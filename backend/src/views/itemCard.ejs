<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>item Card</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .form-control:disabled {
            background-color: #e9ecef;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">item Card</h1>
        <form id="itemForm" method="POST">
            <div class="mb-3">
                <label for="item_no" class="form-label">Item No</label>
                <input type="text" id="no" name="no" class="form-control" value="<%= item.item_no || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="item_type" class="form-label">Item Type</label>
                <input type="text" id="item_type" name="item_type" class="form-control" value="<%= item.item_type || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <input type="text" id="description" name="description" class="form-control" value="<%= item.description || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="item_category_code" class="form-label">Item Category Code</label>
                <input type="text" id="item_category_code" name="item_category_code" class="form-control" value="<%= item.item_category_code || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="size" class="form-label">Size</label>
                <input type="number" id="size" name="size" class="form-control" value="<%= item.size || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="weight" class="form-label">Weight</label>
                <input type="number" id="weight" name="weight" class="form-control" value="<%= item.weight || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="quantity" class="form-label">Quantity</label>
                <input type="number" id="quantity" name="quantity" class="form-control" value="<%= item.quantity || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="unit_cost" class="form-label">Unit Cost</label>
                <input type="number" id="unit_cost" name="unit_cost" class="form-control" value="<%= item.unit_cost || '' %>" disabled>
            </div>
            <div class="mb-3">
                <label for="price" class="form-label">Price</label>
                <input type="number" id="price" name="price" class="form-control" value="<%= item.price || '' %>" disabled>
            </div>
            <button type="button" id="editButton" class="btn btn-primary">Edit</button>
            <button type="submit" id="saveButton" class="btn btn-success d-none">Save</button>
        </form>
    </div>
    <script>
        const editButton = document.getElementById('editButton');
        const saveButton = document.getElementById('saveButton');
        const formControls = document.querySelectorAll('#itemForm .form-control');
        const itemForm = document.getElementById('itemForm');

        // Получить текущий URL
        const currentUrl = window.location.pathname;

        // Установить action формы в зависимости от URL
        if (currentUrl.includes('/items/create')) {
            itemForm.action = '/items/create';
        } else if (currentUrl.includes('/items/update')) {
            const itemNo = '<%= item.item_no %>';
            itemForm.action = `/items/update/${itemNo}`;
        }

        // Переключение режима редактирования
        editButton.addEventListener('click', () => {
            formControls.forEach(input => input.disabled = false);
            editButton.classList.add('d-none');
            saveButton.classList.remove('d-none');
        });
    </script>
</body>
</html>
